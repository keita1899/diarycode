<!-- エラーメッセージ -->
<% if @report.errors.any? %>
  <div class="mb-6 bg-red-50 border border-red-200 rounded-md p-4">
    <h3 class="text-red-800 font-medium mb-2">エラーがあります:</h3>
    <ul class="text-red-700 text-sm space-y-1">
      <% @report.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<!-- フォーム -->
<%= form_with model: @report, local: true, class: "space-y-6" do |form| %>
  <!-- 日付フィールド -->
  <div>
    <%= form.label :date, Report.human_attribute_name(:date), class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= form.date_field :date, 
        class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" %>
  </div>

  <!-- マークダウンエディタ -->
  <div>
    <%= form.label :body, "#{Report.human_attribute_name(:body)}（Markdown形式）", class: "block text-sm font-medium text-gray-700 mb-2" %>
    
    <%= form.text_area :body, 
        rows: 20,
        placeholder: "今日の作業内容をマークダウンで記入してください...\n\n例:\n## 完了したタスク\n- [ ] タスク1\n- [x] 完了したタスク\n\n## 学習内容\n### 新しく学んだこと\n- Rails 7の新機能\n\n## 明日の予定\n1. 機能Aの実装\n2. テストの作成",
        class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 font-mono text-sm" %>
  </div>

  <!-- 送信ボタン -->
  <div class="flex items-center justify-between pt-6">
    <div class="flex items-center space-x-3">
      <%= link_to "キャンセル", calendar_path, 
          class: "text-gray-600 hover:text-gray-900 px-4 py-2 border border-gray-300 rounded-md transition-colors" %>
      
      <% if @report.persisted? %>
        <%= link_to "削除", report_path(@report), 
            method: :delete,
            data: { 
              confirm: "#{@report.date.strftime('%Y年%m月%d日')}の日報を削除してもよろしいですか？",
              turbo_method: :delete
            },
            class: "text-red-600 hover:text-red-700 px-4 py-2 border border-red-300 hover:border-red-400 rounded-md transition-colors" %>
      <% end %>
    </div>
    
    <%= form.submit @report.persisted? ? t('helpers.submit.report.update') : t('helpers.submit.report.create'), 
        class: "bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md shadow transition-colors" %>
  </div>
<% end %> 